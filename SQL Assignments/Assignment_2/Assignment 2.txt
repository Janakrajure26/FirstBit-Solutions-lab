
                  Assignment - 2

1) Create the table Member, Books and Issue without any constraints as
mentioned in the schema description above.
        
         member table 

Ans) mysql> create table member
    -> ( member_id int,
    -> member_name varchar(30)
    -> ,
    -> member_address varchar(50),
    -> acc_open_date date,
    -> membership_type varchar(20),
    -> fees_paid int,
    -> max_books_allowed int ,
    -> penalty_amount decimal(7,2));
Query OK, 0 rows affected (0.35 sec)

        books table

mysql> create table books
    -> ( book_no int,
    -> book_name varchar(30),
    -> author_name varchar(30),
    -> cost decimal(7,2),
    -> category char(10));
Query OK, 0 rows affected (0.05 sec)

        table issue 

mysql> create table issue
    -> (lib_issue_id int ,
    -> book_no int,
    -> member_id int,
    -> issue_date date,
    -> return_date date );
Query OK, 0 rows affected (0.05 sec)


2) View the structure of the tables.

mysql> desc member;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| member_id         | int          | YES  |     | NULL    |       |
| member_name       | varchar(30)  | YES  |     | NULL    |       |
| member_address    | varchar(50)  | YES  |     | NULL    |       |
| acc_open_date     | date         | YES  |     | NULL    |       |
| membership_type   | varchar(20)  | YES  |     | NULL    |       |
| fees_paid         | int          | YES  |     | NULL    |       |
| max_books_allowed | int          | YES  |     | NULL    |       |
| penalty_amount    | decimal(7,2) | YES  |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+
8 rows in set (0.09 sec)


mysql> desc books ;
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| book_no     | int          | YES  |     | NULL    |       |
| book_name   | varchar(30)  | YES  |     | NULL    |       |
| author_name | varchar(30)  | YES  |     | NULL    |       |
| cost        | decimal(7,2) | YES  |     | NULL    |       |
| category    | char(10)     | YES  |     | NULL    |       |
+-------------+--------------+------+-----+---------+-------+
5 rows in set (0.00 sec)


mysql> desc issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| lib_issue_id | int  | YES  |     | NULL    |       |
| book_no      | int  | YES  |     | NULL    |       |
| member_id    | int  | YES  |     | NULL    |       |
| issue_date   | date | YES  |     | NULL    |       |
| return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.00 sec)


3) Drop the Member table

  ans )mysql> drop table member;
       Query OK, 0 rows affected (0.05 sec)

4) Create the table Member again as per the schema description with the
following constraints.
  a. Member_Id â€“ Primary Key
  b. Membership_type - â€˜Lifetimeâ€™,â€™ Annualâ€™, â€˜Half Yearlyâ€™,â€™ Quarterlyâ€™

ans) mysql> create table member
    -> ( member_id int primary key,
    -> member_name varchar(30),
    -> member_address varchar(50),
    -> acc_open_date date,
    -> membership_type varchar(20)check (membership_type in ('lifetime','annual','half yearly', 'quarterly')),
    -> fees_paid int,
    -> max_books_allowed int ,
    -> penalty_amount decimal(7,2));
Query OK, 0 rows affected (0.24 sec)


mysql> desc member ;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| member_id         | int          | NO   | PRI | NULL    |       |
| member_name       | varchar(30)  | YES  |     | NULL    |       |
| member_address    | varchar(50)  | YES  |     | NULL    |       |
| acc_open_date     | date         | YES  |     | NULL    |       |
| membership_type   | varchar(20)  | YES  |     | NULL    |       |
| fees_paid         | int          | YES  |     | NULL    |       |
| max_books_allowed | int          | YES  |     | NULL    |       |
| penalty_amount    | decimal(7,2) | YES  |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+


5) Modify the table Member increase the width of the member name to 30
characters.

Ans)  mysql> alter table member
    -> modify column member_name varchar(30);
      Query OK, 0 rows affected (0.22 sec)
      Records: 0  Duplicates: 0  Warnings: 0

6) Add a column named as Reference of Char(30) to Issue table.

Ans)  mysql> desc issue;

mysql> alter table issue
    -> add column  reference  char(30);
Query OK, 0 rows affected (0.23 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc issue ;
+--------------+----------+------+-----+---------+-------+
| Field        | Type     | Null | Key | Default | Extra |
+--------------+----------+------+-----+---------+-------+
| lib_issue_id | int      | YES  |     | NULL    |       |
| book_no      | int      | YES  |     | NULL    |       |
| member_id    | int      | YES  |     | NULL    |       |
| issue_date   | date     | YES  |     | NULL    |       |
| return_date  | date     | YES  |     | NULL    |       |
| reference    | char(30) | YES  |     | NULL    |       |
+--------------+----------+------+-----+---------+-------+


7) Delete/Drop the column Reference from Issue.

 Ans)
      mysql> alter table issue
    -> drop column reference ;
    Query OK, 0 rows affected (0.08 sec)
    Records: 0  Duplicates: 0  Warnings: 0

mysql> desc issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| lib_issue_id | int  | YES  |     | NULL    |       |
| book_no      | int  | YES  |     | NULL    |       |
| member_id    | int  | YES  |     | NULL    |       |
| issue_date   | date | YES  |     | NULL    |       |
| return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.00 sec)



8) Rename the table Issue to Lib_Issue.

 Ans) mysql> rename table issue to lib_issue ;
  Query OK, 0 rows affected (0.04 sec)

  mysql> desc lib_issue ;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| lib_issue_id | int  | YES  |     | NULL    |       |
| book_no      | int  | YES  |     | NULL    |       |
| member_id    | int  | YES  |     | NULL    |       |
| issue_date   | date | YES  |     | NULL    |       |
| return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.01 sec)


9) Insert following data in table Member
  
Ans)  mysql> insert into member                                                    values  (1, 'richa sharma', 'pune', '2005-12-10' ,'lifetime', 25000 , 5, 50),
    -> (2, 'garima sen ', 'pune','2026-01-19','annual', 1000, 3 , null);
Query OK, 2 rows affected (0.07 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> select * from member;
+-----------+--------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
| member_id | member_name  | member_address | acc_open_date | membership_type | fees_paid | max_books_allowed | penalty_amount |
+-----------+--------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
|         1 | richa sharma | pune           | 2005-12-10    | lifetime        |     25000 |                 5 |          50.00 |
|         2 | garima sen   | pune           | 2026-01-19    | annual          |      1000 |                 3 |           NULL |
+-----------+--------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
2 rows in set (0.03 sec)

10) Insert at least 5 records with suitable data.

Ans)mysql> INSERT INTO member VALUES
    -> (3, 'amit patil', 'mumbai', '2024-03-15', 'annual', 1200, 4, 0),
    -> (4, 'neha joshi', 'delhi', '2023-11-01', 'quarterly', 500, 2, 25),
    -> (5, 'rahul verma', 'nagpur', '2022-06-20', 'half yearly', 1500, 3, 10),
    -> (6, 'sneha kulkarni', 'pune', '2021-09-10', 'lifetime', 30000, 6, 0),      
       (7,'vikas Sharma', 'indore', '2025-01-05', 'annual', 1000, 5, NULL);
         Query OK, 5 rows affected (0.01 sec)
          Records: 5  Duplicates: 0  Warnings: 0


mysql> select * from member;
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
| member_id | member_name    | member_address | acc_open_date | membership_type | fees_paid | max_books_allowed | penalty_amount |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
|         1 | richa sharma   | pune           | 2005-12-10    | lifetime        |     25000 |                 5 |          50.00 |
|         2 | garima sen     | pune           | 2026-01-19    | annual          |      1000 |                 3 |           NULL |
|         3 | amit patil     | mumbai         | 2024-03-15    | annual          |      1200 |                 4 |           0.00 |
|         4 | neha joshi     | delhi          | 2023-11-01    | quarterly       |       500 |                 2 |          25.00 |
|         5 | rahul verma    | nagpur         | 2022-06-20    | half yearly     |      1500 |                 3 |          10.00 |
|         6 | sneha kulkarni | pune           | 2021-09-10    | lifetime        |     30000 |                 6 |           0.00 |
|         7 | vikas Sharma   | indore         | 2025-01-05    | annual          |      1000 |                 5 |           NULL |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
7 rows in set (0.00 sec)

mysql>


11) Modify the column Member_name. Decrease the width of the member
name to 20 characters. (If it does not allow state the reason for that)

Ans) mysql> alter table member
    -> modify column member_name varchar(20);
  Query OK, 7 rows affected (0.36 sec)
   Records: 7  Duplicates: 0  Warnings: 0


     mysql> alter table member
    -> modify column member_name varchar(10);
ERROR 1265 (01000): Data truncated for column 'member_name' at row 1
mysql> 
       this error because It does not allow reducing the width to 10 characters because existing data exceeds the new column size, which would cause data truncation.


12) Try to insert a record with Max_Books_Allowed = 110, Observe the
error that comes.

Ans)  mysql> insert into member
    -> value (8,'janak rajure', 'pune', '2022-11-04','annual' , 1000, 110,0);
Query OK, 1 row affected (0.04 sec)

mysql> select * from member;
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
| member_id | member_name    | member_address | acc_open_date | membership_type | fees_paid | max_books_allowed | penalty_amount |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
|         1 | richa sharma   | pune           | 2005-12-10    | lifetime        |     25000 |                 5 |          50.00 |
|         2 | garima sen     | pune           | 2026-01-19    | annual          |      1000 |                 3 |           NULL |
|         3 | amit patil     | mumbai         | 2024-03-15    | annual          |      1200 |                 4 |           0.00 |
|         4 | neha joshi     | delhi          | 2023-11-01    | quarterly       |       500 |                 2 |          25.00 |
|         5 | rahul verma    | nagpur         | 2022-06-20    | half yearly     |      1500 |                 3 |          10.00 |
|         6 | sneha kulkarni | pune           | 2021-09-10    | lifetime        |     30000 |                 6 |           0.00 |
|         7 | vikas Sharma   | indore         | 2025-01-05    | annual          |      1000 |                 5 |           NULL |
|         8 | janak rajure   | pune           | 2022-11-04    | annual          |      1000 |               110 |           0.00 |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
8 rows in set (0.00 sec)    no any error

13) Generate another table named Member101 using a Create command
along with a simple SQL query on member table.

Ans)mysql> create table member101 as select * from member;
Query OK, 8 rows affected (0.10 sec)
Records: 8  Duplicates: 0  Warnings: 0

mysql> select * from member101;
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
| member_id | member_name    | member_address | acc_open_date | membership_type | fees_paid | max_books_allowed | penalty_amount |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
|         1 | richa sharma   | pune           | 2005-12-10    | lifetime        |     25000 |                 5 |          50.00 |
|         2 | garima sen     | pune           | 2026-01-19    | annual          |      1000 |                 3 |           NULL |
|         3 | amit patil     | mumbai         | 2024-03-15    | annual          |      1200 |                 4 |           0.00 |
|         4 | neha joshi     | delhi          | 2023-11-01    | quarterly       |       500 |                 2 |          25.00 |
|         5 | rahul verma    | nagpur         | 2022-06-20    | half yearly     |      1500 |                 3 |          10.00 |
|         6 | sneha kulkarni | pune           | 2021-09-10    | lifetime        |     30000 |                 6 |           0.00 |
|         7 | vikas Sharma   | indore         | 2025-01-05    | annual          |      1000 |                 5 |           NULL |
|         8 | janak rajure   | pune           | 2022-11-04    | annual          |      1000 |               110 |           0.00 |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
8 rows in set (0.00 sec)

14) Add the constraints on columns max_books_allowed and penalty_amt
as follows
a. max_books_allowed < 100
b. penalty_amt maximum 1000
Also give names to the constraints.

Ans) a     
   
    mysql> alter table member
    -> add constraint check ( max_books_allowed <100);
ERROR 3819 (HY000): Check constraint 'member_chk_2' is violated.   
  this error because   When you ADD a CHECK constraint, MySQL validates all existing rows.

In your member table, at least one record has:

max_books_allowed >= 100


This record was inserted earlier (Q-12 practice).

âž¡ï¸ Because existing data violates the rule, MySQL refuses to add the constraint.
   
The CHECK constraint could not be added because existing records in the Member table violate the constraint condition.


b. mysql> alter table member
    -> add constraint check ( penalty_amount <= 1000);
      Query OK, 8 rows affected (0.16 sec)
      Records: 8  Duplicates: 0  Warnings: 0

CONSTRAINT `member_chk_2` CHECK ((`penalty_amount` <= 1000))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci 


15) Drop the table books.

ans) mysql> drop table books;
Query OK, 0 rows affected (0.03 sec)


16) Create table Books again as per the schema description with the
following constraints.
a. Book_No â€“ Primary Key
b. Book_Name â€“ Not Null
c. Category â€“ System, Fiction, Database, RDBMS, Others.

16) Create table Books again as per the schema description with the
following constraints.
a. Book_No â€“ Primary Key
b. Book_Name â€“ Not Null
c. Category â€“ System, Fiction, Database, RDBMS, Others.

Ans) mysql> create  table books
    -> ( book_no int primary key ,
    -> book_name  varchar(30) not null,
    -> author_name varchar(30),
    -> cost decimal (7,2),
    -> category varchar(10)
    -> check ( category in ('system ', 'faction ', 'database', 'RDBMS', 'others')));
Query OK, 0 rows affected (0.22 sec)

mysql> desc books;
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| book_no     | int          | NO   | PRI | NULL    |       |
| book_name   | varchar(30)  | NO   |     | NULL    |       |
| author_name | varchar(30)  | YES  |     | NULL    |       |
| cost        | decimal(7,2) | YES  |     | NULL    |       |
| category    | varchar(10)  | YES  |     | NULL    |       |
+-------------+--------------+------+-----+---------+-------+
5 rows in set (0.04 sec)



17) Insert data in Book table as follows:

Ans) mysql> INSERT INTO books VALUES
    -> (101,'Let Us C','Denis Ritchie',450,'System'),
    -> (120,'Oracle Complete Ref','Loni',550,'Database'),
    -> (103,'Mastering SQL','Loni',250,'Database'),
    -> (104,'PL SQL Ref','Scott Urman',750,'Database');
Query OK, 4 rows affected (0.01 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> select * from books;
+---------+---------------------+---------------+--------+----------+
| book_no | book_name           | author_name   | cost   | category |
+---------+---------------------+---------------+--------+----------+
|     101 | Let Us C            | Denis Ritchie | 450.00 | System   |
|     103 | Mastering SQL       | Loni          | 250.00 | Database |
|     104 | PL SQL Ref          | Scott Urman   | 750.00 | Database |
|     120 | Oracle Complete Ref | Loni          | 550.00 | Database |
+---------+---------------------+---------------+--------+----------+
4 rows in set (0.01 sec)



18) Insert more records in Book table.

mysql> insert into books values (105,'DBMs concept','korth',600,'RDBMS'),
    -> (106,'operating system','galvin',550,'System'),
    -> (107,'java programming','james gosling ',700,'Other');
Query OK, 3 rows affected (0.02 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> select * from books ;
+---------+---------------------+----------------+--------+----------+
| book_no | book_name           | author_name    | cost   | category |
+---------+---------------------+----------------+--------+----------+
|     101 | Let Us C            | Denis Ritchie  | 450.00 | System   |
|     103 | Mastering SQL       | Loni           | 250.00 | Database |
|     104 | PL SQL Ref          | Scott Urman    | 750.00 | Database |
|     105 | DBMs concept        | korth          | 600.00 | RDBMS    |
|     106 | operating system    | galvin         | 550.00 | System   |
|     107 | java programming    | james gosling  | 700.00 | Other    |
|     120 | Oracle Complete Ref | Loni           | 550.00 | Database |
+---------+---------------------+----------------+--------+----------+
7 rows in set (0.00 sec)


19) View the data in the tables using simple SQL query.

Ans)ysql> select * from member;
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
| member_id | member_name    | member_address | acc_open_date | membership_type | fees_paid | max_books_allowed | penalty_amount |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
|         1 | richa sharma   | pune           | 2005-12-10    | lifetime        |     25000 |                 5 |          50.00 |
|         2 | garima sen     | pune           | 2026-01-19    | annual          |      1000 |                 3 |           NULL |
|         3 | amit patil     | mumbai         | 2024-03-15    | annual          |      1200 |                 4 |           0.00 |
|         4 | neha joshi     | delhi          | 2023-11-01    | quarterly       |       500 |                 2 |          25.00 |
|         5 | rahul verma    | nagpur         | 2022-06-20    | half yearly     |      1500 |                 3 |          10.00 |
|         6 | sneha kulkarni | pune           | 2021-09-10    | lifetime        |     30000 |                 6 |           0.00 |
|         7 | vikas Sharma   | indore         | 2025-01-05    | annual          |      1000 |                 5 |           NULL |
|         8 | janak rajure   | pune           | 2022-11-04    | annual          |      1000 |               110 |           0.00 |
+-----------+----------------+----------------+---------------+-----------------+-----------+-------------------+----------------+
8 rows in set (0.01 sec)

mysql> select * from books;
+---------+---------------------+----------------+--------+----------+
| book_no | book_name           | author_name    | cost   | category |
+---------+---------------------+----------------+--------+----------+
|     101 | Let Us C            | Denis Ritchie  | 450.00 | System   |
|     103 | Mastering SQL       | Loni           | 250.00 | Database |
|     104 | PL SQL Ref          | Scott Urman    | 750.00 | Database |
|     105 | DBMs concept        | korth          | 600.00 | RDBMS    |
|     106 | operating system    | galvin         | 550.00 | System   |
|     107 | java programming    | james gosling  | 700.00 | Other    |
|     120 | Oracle Complete Ref | Loni           | 550.00 | Database |
+---------+---------------------+----------------+--------+----------+
7 rows in set (0.00 sec)

mysql> select * from lib_issue;
Empty set (0.04 sec)


 20) Insert into Book following data.

     105, National Geographic, Adis Scott, 1000, Science


Ans)   mysql> insert into books values (108, 'national geographic','adis scott',1000,'science');
ERROR 3819 (HY000): Check constraint 'books_chk_1' is violated.
mysql>



reason for this ----- The error occurs because the value Science for the category column does not satisfy the CHECK constraint defined on the Books table.
The CHECK constraint allows only System, Fiction, Database, RDBMS, and Other.
Since Science is not included, MySQL rejects the insertion.


21) Rename the table Lib_Issue to Issue.

Ans)mysql> rename  table lib_issue  to  Issue ;
Query OK, 0 rows affected (0.32 sec)

mysql> desc Issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| lib_issue_id | int  | YES  |     | NULL    |       |
| book_no      | int  | YES  |     | NULL    |       |
| member_id    | int  | YES  |     | NULL    |       |
| issue_date   | date | YES  |     | NULL    |       |
| return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.06 sec)


22) Drop table Issue.

Ans)mysql> drop table issue;
Query OK, 0 rows affected (0.09 sec)

mysql> desc issue;
ERROR 1146 (42S02): Table 'dec03.issue' doesn't exist
mysql>


23) As per the given structure Create table Issue again with following
constraints.

ï‚§ Lib_Issue_Id-Primary key
ï‚§ Book_No- foreign key
ï‚§ Member_id - foreign key
ï‚§ Issue_date
ï‚§ Return_date


Ans)mysql> create table issue
    -> ( lib_issue_id int primary key,
    -> book_no int ,
    -> member_id int ,
    -> issue_date date,
    -> return_date date );
    Query OK, 0 rows affected (0.37 sec)

    mysql> alter table issue
    -> add constraint
    -> foreign key (book_no) references books(book_no);
    Query OK, 0 rows affected (0.37 sec)
    Records: 0  Duplicates: 0  Warnings: 0

     mysql> alter table issue
    -> add constraint
    -> foreign key (member_id) references member(member_id);
    Query OK, 0 rows affected (0.16 sec)
    Records: 0  Duplicates: 0  Warnings: 0

mysql> desc issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| lib_issue_id | int  | NO   | PRI | NULL    |       |
| book_no      | int  | YES  | MUL | NULL    |       |
| member_id    | int  | YES  | MUL | NULL    |       |
| issue_date   | date | YES  |     | NULL    |       |
| return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.06 sec)


24) Insert following data into Issue table.

Lib_Issue_Id | Book_No | Member_ID | Issue_Date
7001         | 101     | 1         | 10-Dec-06
7002         | 102     | 2         | 25-Dec-06
7003         | 104     | 1         | 15-Jan-06
7004         | 101     | 1         | 04-Jul-06
7005         | 104     | 2         | 15-Nov-06
7006         | 101     | 3         | 18-Feb-06

what is question act  The Issue table has foreign keys:

book_no â†’ references books(book_no)

member_id â†’ references member(member_id)

first we tried to add details by some error some like this

mysql> insert into issue (lib_issue_id , book_no, member_id, issue_date) values( 7001,101,1,'2006-10-10'),
    -> (7002,102,2,'2006-10-25'),
    -> (7003,104,1,'2006-01-15'),
    -> (7004,101,1,'2006-07-04'),
    -> (7005,104,2,'2006-11-15'),
    -> (7006,101,3,'2006-02-18');
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`dec03`.`issue`, CONSTRAINT `issue_ibfk_1` FOREIGN KEY (`book_no`) REFERENCES `books` (`book_no`))  like this***

what this error say ?

What this means:

You are inserting data into Issue (child table)
But Book_No 102 does NOT exist in the Books (parent table)

Example problem row:
(7002,102,2,'2006-10-25')


But in books table:

SELECT book_no FROM books;


Book 102 was missing.


(solution for it ) Insert missing book  record first:

INSERT INTO books
VALUES (102,'Oracle Complete Ref','Loni',550,'Database');


then we insert record 

mysql> insert into issue (lib_issue_id , book_no, member_id, issue_date) values( 7001,101,1,'2006-10-10'),
    -> (7002,102,2,'2006-10-25'),
    -> (7003,104,1,'2006-01-15'),
    -> (7004,101,1,'2006-07-04'),
    -> (7005,104,2,'2006-11-15'),
    -> (7006,101,3,'2006-02-18');
Query OK, 6 rows affected (0.02 sec)
Records: 6  Duplicates: 0  Warnings: 0


Q) output is
mysql> select * from issue ;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-10-10 | NULL        |
|         7002 |     102 |         2 | 2006-10-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-07-04 | NULL        |
|         7005 |     104 |         2 | 2006-11-15 | NULL        |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
+--------------+---------+-----------+------------+-------------+


25) Remove the constraints on Issue table

ALTER TABLE issue DROP FOREIGN KEY issue_ibfk_1;
 
we cant drop foreign key like this ALTER TABLE issue DROP FOREIGN KEY book_no;
error will come 

to drop foreign key we need  issue_ibfk_1 

Q) from where did we get issue_ibfk_1?

for that we have to do show create table issue in that table we will get to see 
issue_ibfk_1 ok;

mysql> alter table issue
    -> drop foreign key issue_ibfk_1,
    -> drop foreign key issue_ibfk_2;
Query OK, 0 rows affected (0.09 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| lib_issue_id | int  | NO   | PRI | NULL    |       |
| book_no      | int  | YES  | MUL | NULL    |       |
| member_id    | int  | YES  | MUL | NULL    |       |
| issue_date   | date | YES  |     | NULL    |       |
| return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.01 sec)

+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| issue | CREATE TABLE `issue` (
  `lib_issue_id` int NOT NULL,
  `book_no` int DEFAULT NULL,
  `member_id` int DEFAULT NULL,
  `issue_date` date DEFAULT NULL,
  `return_date` date DEFAULT NULL,
  PRIMARY KEY (`lib_issue_id`),
  KEY `book_no` (`book_no`),
  KEY `member_id` (`member_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |
+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)    foreign key is removed;


26) Insert a record in Issue table. The member_id should not exist in
member table.

Ans)  mysql> insert into issue
    -> values (7007,101,99,'2007-01-01',null);
Query OK, 1 row affected (0.04 sec)

mysql> select * from issue;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-10-10 | NULL        |
|         7002 |     102 |         2 | 2006-10-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-07-04 | NULL        |
|         7005 |     104 |         2 | 2006-11-15 | NULL        |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
|         7007 |     101 |        99 | 2007-01-01 | NULL        |
+--------------+---------+-----------+------------+-------------+

27) Now enable the constraints of Issue table. Observe the error

mysql> alter table issue
    -> add foreign key (member_id) references member(member_id);
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`dec03`.`#sql-1164_d`, CONSTRAINT `issue_ibfk_1` FOREIGN KEY (`member_id`) REFERENCES `member` (`member_id`))
mysql>

why?

When you try to add the foreign key back  error because member_id = 99 does not exist in member table. This proves foreign key enforcement.

Question 26 requires inserting a record into the Issue table with a member_id that does not exist in the Member table.
This is done after removing foreign key constraints to demonstrate that invalid references are allowed when constraints are not enforced.

in simple lang explanation 

When we try to enable the foreign key constraints again on the Issue table, MySQL checks all existing records in the table. Since, in the previous question, a record was inserted with a member_id that does not exist in the Member table, the existing data violates the foreign key rule. Because foreign key constraints enforce referential integrity, MySQL does not allow enabling the constraint when invalid data is already present. Therefore, an error is generated, showing that the Issue table contains a record with a member_id that has no matching entry in the Member table.

28) Delete the record inserted at Q-27) and enable the constraints.


mysql> delete from issue where member_id = 99 ;
Query OK, 1 row affected (0.05 sec)

mysql> select * from issue;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-10-10 | NULL        |
|         7002 |     102 |         2 | 2006-10-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-07-04 | NULL        |
|         7005 |     104 |         2 | 2006-11-15 | NULL        |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
+--------------+---------+-----------+------------+-------------+

29) Try to delete the record of member id 1 from member table and
observe the error .

mysql> delete from member where member_id = 1;
ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`dec03`.`issue`, CONSTRAINT `issue_ibfk_1` FOREIGN KEY (`member_id`) REFERENCES `member` (`member_id`))
mysql>

member_id = 1 exists in the Issue table

issue.member_id is a FOREIGN KEY

Foreign key rule says:

You cannot delete a member if that member is used in Issue table

So MySQL stopped the delete to protect the data.

30) View the data and structure of all the three tables Member,
Issue, Book.

mysql> desc member;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| member_id         | int          | NO   | PRI | NULL    |       |
| member_name       | varchar(20)  | YES  |     | NULL    |       |
| member_address    | varchar(50)  | YES  |     | NULL    |       |
| acc_open_date     | date         | YES  |     | NULL    |       |
| membership_type   | varchar(20)  | YES  |     | NULL    |       |
| fees_paid         | int          | YES  |     | NULL    |       |
| max_books_allowed | int          | YES  |     | NULL    |       |
| penalty_amount    | decimal(7,2) | YES  |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+
8 rows in set (0.09 sec)

mysql> desc issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| lib_issue_id | int  | NO   | PRI | NULL    |       |
| book_no      | int  | YES  | MUL | NULL    |       |
| member_id    | int  | YES  | MUL | NULL    |       |
| issue_date   | date | YES  |     | NULL    |       |
| return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.00 sec)

mysql> desc books;
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| book_no     | int          | NO   | PRI | NULL    |       |
| book_name   | varchar(30)  | NO   |     | NULL    |       |
| author_name | varchar(30)  | YES  |     | NULL    |       |
| cost        | decimal(7,2) | YES  |     | NULL    |       |
| category    | varchar(10)  | YES  |     | NULL    |       |
+-------------+--------------+------+-----+---------+-------+
5 rows in set (0.01 sec)

31) Modify the Return_Date of 7004,7005 to 15 days after the
Issue_date.

mysql> UPDATE issue
    -> SET return_date = DATE_ADD(issue_date, INTERVAL 15 DAY)
    -> WHERE lib_issue_id IN (7004, 7005);
Query OK, 2 rows affected (0.02 sec)
Rows matched: 2  Changed: 2  Warnings: 0

mysql> select * from issue;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-10-10 | NULL        |
|         7002 |     102 |         2 | 2006-10-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-07-04 | 2006-07-19  |
|         7005 |     104 |         2 | 2006-11-15 | 2006-11-30  |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
+--------------+---------+-----------+------------+-------------+
6 rows in set (0.00 sec)


32) Remove all the records from Issue table where member_ID is 1
and Issue date in before 10-Dec-06.

mysql> select * from issue;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-10-10 | NULL        |
|         7002 |     102 |         2 | 2006-10-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-07-04 | 2006-07-19  |
|         7005 |     104 |         2 | 2006-11-15 | 2006-11-30  |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
+--------------+---------+-----------+------------+-------------+
6 rows in set (0.00 sec)

mysql> delete from issue where member_id =1 and issue_date<'2006-12-10';
Query OK, 3 rows affected (0.03 sec)

mysql> select * from issue;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7002 |     102 |         2 | 2006-10-25 | NULL        |
|         7005 |     104 |         2 | 2006-11-15 | 2006-11-30  |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
+--------------+---------+-----------+------------+-------------+
3 rows in set (0.00 sec)

33) Remove all the records from Book table with category other
than RDBMS and Database.

mysql> delete from books where category not in ('RDBMS','Database');
Query OK, 3 rows affected (0.06 sec)

mysql> select * from books
    -> ;
+---------+---------------------+-------------+--------+----------+
| book_no | book_name           | author_name | cost   | category |
+---------+---------------------+-------------+--------+----------+
|     102 | oracle complete ref | loni        | 550.00 | Database |
|     103 | Mastering SQL       | Loni        | 250.00 | Database |
|     104 | PL SQL Ref          | Scott Urman | 750.00 | Database |
|     105 | DBMs concept        | korth       | 600.00 | RDBMS    |
|     120 | Oracle Complete Ref | Loni        | 550.00 | Database |
+---------+---------------------+-------------+--------+----------+

34) Remove the table Member.

mysql> drop table member;
ERROR 3730 (HY000): Cannot drop table 'member' referenced by a foreign key constraint 'issue_ibfk_1' on table 'issue'.

reason

member table is a parent table
issue table is a child table
issue.member_id is a foreign key that depends on member.member_id
ðŸ‘‰ Because of this relationship, MySQL does NOT allow you to drop the parent table first.
we need to drop first child then parent mean first issue then member


35) Remove the table Book.

mysql> drop table issue;
Query OK, 0 rows affected (0.12 sec)

mysql> drop table member;
Query OK, 0 rows affected (0.05 sec)

mysql> drop table books;
Query OK, 0 rows affected (0.04 sec)